<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <script type="text/javascript" src="lib/jquery-ui-1.10.3.custom/js/jquery-1.9.1.js"></script>
        <script type="text/javascript" src="lib/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js"></script>
        <script type="text/javascript" src="lib/chap-links-library/js/src/timeline/timeline.js"></script>
        <script type="text/javascript" src="lib/svgjs/svg.js" charset="utf-8"></script> 	
        <script type="text/javascript" src="lib/svgjs/svg.draggable.js" charset="utf-8"></script> 
        <script type="text/javascript" src="lib/svgjs/svg.foreignobject.js" charset="utf-8"></script> 
        <script type="text/javascript" src="lib/organize/organize.js"></script>
        <link rel="stylesheet" type="text/css" href="lib/chap-links-library/js/src/timeline/timeline.css">
        <script type="text/javascript">
            var timeline;
            var data;

            // Called when the Visualization API is loaded.
            function drawVisualization() {
                // Create a JSON data table
                data = [
                    {
                        'start': new Date(2010, 7, 23),
                        'content': 'Conversation<br>'
                    },
                    {
                        'start': new Date(2010, 7, 23, 23, 0, 0),
                        'content': 'Mail from boss<br>'
                    },
                    {
                        'start': new Date(2010, 7, 24, 16, 0, 0),
                        'content': 'Report'
                    },
                    {
                        'start': new Date(2010, 7, 26),
                        'end': new Date(2010, 8, 2),
                        'content': 'Traject A'
                    },
                    {
                        'start': new Date(2010, 7, 28),
                        'content': 'Memo<br>'
                    },
                    {
                        'start': new Date(2010, 7, 29),
                        'content': 'Phone call<br>'
                    },
                    {
                        'start': new Date(2010, 7, 31),
                        'end': new Date(2010, 8, 3),
                        'content': 'Traject B'
                    },
                    {
                        'start': new Date(2010, 8, 4, 12, 0, 0),
                        'content': 'Report<br>'
                    }
                ];

                // specify options
                var options = {
                    'width': '100%',
                    'height': '300px',
                    'style': 'box'
                };

                // Instantiate our timeline object.
                timeline = new links.Timeline(document.getElementById('mytimeline'));

                function onRangeChanged(properties) {
                    document.getElementById('info').innerHTML += 'rangechanged ' +
                            properties.start + ' - ' + properties.end + '<br>';
                }

                // attach an event listener using the links events handler
                links.events.addListener(timeline, 'rangechanged', onRangeChanged);

                // Draw our timeline with the created data and options
                timeline.draw(data, options);

                $(function() {
                    $(".timeline-event").draggable({
                        zIndex: 100,
                        helper: "clone",
                        appendTo: "body",
                        create: function(event, ui) {
                        },
                        start: function(event, ui) {
                            console.log(event);
                            var ev = event;
                            while (ev.originalEvent != null)
                                ev = ev.originalEvent;
                            if (ev.type == "mousedown")
                                ev.stopImmediatePropagation();
                        },
                        drag: function(event, ui) {
                            //console.log(event);
                            var ev = event;
                            while (ev.originalEvent != null)
                                ev = ev.originalEvent;
                            if (ev.type == "mousemove")
                                ev.stopImmediatePropagation();
                        },
                        stop: function(event, ui) {
                        }
                    });
                    $("#bis").droppable({
                        drop: function(event, ui) {
                            console.log("dropped");
                        },
                        over: function(event, ui) {
                            console.log("over");
                        },
                        out: function(event, ui) {
                            console.log("out");
                        }
                    });
                    console.log($("#test-svg-element"));

                    $("#SvgjsSvg1000").mouseup(function(){console.log("bla")});

                });
            }
            function enableEditing() {
                timeline.editable = true;
            }
        </script>
    </head>
    <body onload="drawVisualization();">
        <h1>Timeline JSON data</h1>
        <p>
            This demo shows how to feed the Timeline with JSON data.
            No Google DataTable is used, and therefore the Google JSAPI is
            not needed by the Timeline, which can thus be used offline.
        </p>
        <input type="button" onclick="enableEditing();" value="edit timeline"/>
        <div id="mytimeline"></div>
        <div id="bis" 
             style="width:800px; height:800px; border-style:solid;border-width:1px;">
            <svg id="SvgjsSvg1000" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" xlink="http://www.w3.org/1999/xlink">
            <circle id="test-svg-element" cx="100" cy="50" r="40" stroke="black"
  stroke-width="2" fill="red"/>
            </svg>
        </div>
    </body>
</html>
