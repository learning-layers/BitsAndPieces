<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="lib/VIE/lib/jquery/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="lib/VIE/lib/underscoreJS/underscore.min.js"></script>
    <script type="text/javascript" src="lib/VIE/lib/backboneJS/backbone.min.js"></script>
    <script type="text/javascript" src="lib/VIE/dist/vie.js"></script>
    <script type="text/javascript" src="js/service/SocialSemanticMockupService.js"></script>
    <script type="text/javascript" src="js/service/TimelineService.js"></script>
    <script type="text/javascript" src="lib/chap-links-library/js/src/timeline/timeline.js"></script>
    <link rel="stylesheet" type="text/css" href="lib/chap-links-library/js/src/timeline/timeline.css">
    <script type="text/javascript">
        var timeline;
        var data;

        // Called when the Visualization API is loaded.
        function drawVisualization() {
            // Create a JSON data table
            data = [
            ];

            // specify options
            var options = {
                'width':  '100%',
                'height': '300px',
                'editable': true,   // enable dragging and editing events
                'style': 'box'
            };

            // Instantiate our timeline object.
            timeline = new links.Timeline(document.getElementById('mytimeline'));

            function onRangeChanged(properties) {
                document.getElementById('info').innerHTML += 'rangechanged ' +
                        properties.start + ' - ' + properties.end + '<br>';
            }

            // attach an event listener using the links events handler
            links.events.addListener(timeline, 'rangechanged', onRangeChanged);

            // Draw our timeline with the created data and options
            timeline.draw(data, options);

            v = new VIE();
            v.use(new v.SocialSemanticService(), 'sss');
            v.use(new v.TimelineService({'timeline': timeline}), 'tl');
            var entity;
            v.load({}).from('sss').execute().success(function(entities) {
                console.log("We got " + entities.length + " objects from the service");
                console.log(entities);
                entity = entities[0];
            });
            entity.set('time', '2013-08-05T09:33:39+02:00')
            v.save({'entity': entity}).to('tl').execute().done(function(){console.log("saved")});
        }
    </script>
  </head>
  <body onLoad="drawVisualization()">

    <h1>Timeline JSON data</h1>
    <p>
        This demo shows how to feed the Timeline with JSON data.
        No Google DataTable is used, and therefore the Google JSAPI is
        not needed by the Timeline, which can thus be used offline.
    </p>

    <div id="mytimeline"></div>

    <div id="info"></div>

  <script type="text/javascript">
  </script>
</html>
